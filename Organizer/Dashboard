@page
@model wcerms.Pages.Organizer.DashboardModel
@{
    ViewData["Title"] = "Organizer Dashboard";
}

<main class="dashboard-layout">
    <div class="dashboard-wrapper organizer-dashboard">

        <!-- Sidebar -->
        <nav class="dashboard-sidebar">
            <h3>Organizer Tools</h3>
            <ul>
                <li><a asp-page="/Organizer/Dashboard" asp-route-Section="CreateEvent">Create Event</a></li>
                <li><a asp-page="/Organizer/Dashboard" asp-route-Section="RequestVenue">Request Venue</a></li>
                <li><a asp-page="/Organizer/Dashboard" asp-route-Section="RequestResources">Request Resources</a></li>
                <li><a asp-page="/Organizer/Dashboard" asp-route-Section="MyBookings">My Bookings</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <div class="dashboard-main">

            @if (TempData["Message"] != null)
            {
                <div class="alert alert-success">@TempData["Message"]</div>
            }

            @switch (Model.Section)
            {
                case "CreateEvent":
                    <section>
                        <h2>Create Event</h2>
                        <form method="post" asp-page-handler="CreateEvent">
                            <div class="mb-3">
                                <label class="form-label">Event Name</label>
                                <input type="text" name="EventName" class="form-control" required />
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Date</label>
                                <input type="date" name="EventDate" class="form-control" required />
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Description</label>
                                <textarea name="EventDescription" class="form-control" rows="3"></textarea>
                            </div>

                            <button type="submit" class="btn btn-primary">Create Event</button>
                        </form>
                    </section>
                    break;

                case "RequestVenue":
                    <section>
                        <h2>Request Venue</h2>
                        <form method="post" asp-page-handler="RequestVenue">
                            <div class="mb-3">
                                <label class="form-label">Venue Name</label>
                                <input type="text" name="VenueName" class="form-control" required />
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Details</label>
                                <textarea name="VenueDetails" class="form-control" rows="3"></textarea>
                            </div>

                            <button type="submit" class="btn btn-primary">Submit Request</button>
                        </form>
                    </section>
                    break;

                case "RequestResources":
                    <section>
                        <h2>Request Resources</h2>
                        <form method="post" asp-page-handler="RequestResources">
                            <div class="mb-3">
                                <label class="form-label">Resource Type</label>
                                <input type="text" name="ResourceType" class="form-control" placeholder="e.g., Projector, Chairs" />
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Quantity</label>
                                <input type="number" name="Quantity" class="form-control" min="1" />
                            </div>

                            <button type="submit" class="btn btn-primary">Submit Request</button>
                        </form>
                    </section>
                    break;

                case "MyBookings":
                    <section>
                        <h2>My Bookings</h2>
                        @if (Model.MyBookings != null && Model.MyBookings.Any())
                        {
                            <table class="dashboard-table">
                                <thead>
                                    <tr>
                                        <th>Event</th>
                                        <th>Venue</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var booking in Model.MyBookings)
                                    {
                                        <tr>
                                            <td>@booking.EventName</td>
                                            <td>@booking.VenueName</td>
                                            <td>@booking.Date.ToString("MMM dd, yyyy")</td>
                                            <td>@booking.Status</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        }
                        else
                        {
                            <p>No bookings found.</p>
                        }
                    </section>
                    break;

                default:
                    <section>
                        <h2>Welcome, Organizer!</h2>
                        <p>Select a tool from the sidebar to begin managing your events and bookings.</p>
                    </section>
                    break;
            }
        </div>
    </div>
</main>
